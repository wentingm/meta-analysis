<section class="container text-center d-flex align-items-center flex-column">
    <div class="col-7">
        <header>
            <h6>Meta-analysis AI Assistant is helping you to retrieve the best suitable papers for you using the following selection criteria:</h6>
        </header>
    </div>
    <section class="prompts-and-filter d-flex justify-content-center w-100">
        <form [formGroup]="promptsFormGroup" class="col-5 d-flex align-items-center flex-column justify-content-between">
            <div class="wrapper-div d-flex justify-content-center align-items-center">
                <div formArrayName="prompts" class="w-75">
                    <div *ngFor="let promptInput of prompts.controls; let idx = index">
                        <div [formGroupName]="idx" class="col-md-12">
                            <label class="form-label" for="prompt-{{ idx }}"><b>Prompt {{ idx+1 }}</b></label>
                            <div class="d-flex">
                                <input type="text" class="form-control border border-dark" id="prompt-{{ idx }}" formControlName="prompt"
                                [placeholder]="predefinedPrompts[idx]">
                                <button (click)="addPrompt()" *ngIf="prompts.length < maxPrompts">
                                    <img src="../../../assets/add-icon.svg" title="Add prompt">
                                </button>
                                <button (click)="removePrompt(idx)" *ngIf="prompts.length > 1">
                                    <img src="../../../assets/delete-icon.svg" title="Delete prompt">
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary mt-3 w-25" (click)="filterSelectedPapers()">Filter</button>
        </form>
    </section>
</section>
<section class="container d-flex mt-5 mx-2 justify-content-center flex-wrap align-items-center" style="max-width: 112.5rem;">
    <div class="selected-titles-wrapper mt-5 me-5 d-flex flex-column border border-2 border-dark">
        <div class="sticky-top m-3">
            <header class="text-start">
                <h5><b>The following titles were selected:</b></h5>
            </header>
        </div>
        <div class=" overflow-y-auto m-3">
            <div *ngFor="let title of selectedTitles" class="mt-3">
                <div class="text-wrap">{{ title }}</div>
            </div>
        </div>
    </div>
    <div *ngIf="areRecommendationAvailable" class="table-responsive mt-4 pt-1">
        <table class="table table-striped table-bordered border border-2 border-dark">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Title</th>
                    <th scope="col">Effect size</th>
                </tr>
            </thead>
            <tbody class="table-group-divider">
                <tr *ngFor="let entry of mockEffectSizeList; index as idx">
                    <th scope="row">{{ idx + 1 }}</th>
                    <td>{{ entry.title }}</td>
                    <td>{{ entry.effectSize | number:'.5' }}</td>
                </tr>
                <tr>
                    <th colspan="2" scope="row">Average effect size</th>
                    <td>{{ calculateAvgEffectSize() | number:'.5' }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div style="min-width: 112.5rem;" class="d-flex justify-content-center">
        <button type="submit"
        class="btn btn-primary mt-3 ms-2 w-10"
        (click)="updateDisplaySummary()" *ngIf="areRecommendationAvailable">Get results?</button>
    </div>
</section>
<section class="container text-center d-flex align-items-center flex-column mt-5 text-wrap" *ngIf="displaySummary">
    <div>
        The pooled effect size across the studies is approximately 0.27, which suggests a very small to negligible overall effect when combining the results.

        This outcome highlights variability in the effectiveness of adaptive learning systems across different contexts, with some studies showing a positive impact and others indicating minimal or even negative differences between experimental and control conditions. You can check further the variances within studies to infer more useful insights.
    </div>
</section>